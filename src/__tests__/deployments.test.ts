/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Vercel } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Deployments Get Deployment Events", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("getDeploymentEvents"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  await vercel.deployments.getDeploymentEvents({
    idOrUrl: "dpl_5WJWYSyB7BpgTj3EuwF37WMRBXBtPQ2iTMJHJBJyRfd",
    direction: "backward",
    follow: 1,
    limit: 100,
    name: "bld_cotnkcr76",
    since: 1540095775941,
    until: 1540106318643,
    statusCode: "5xx",
    delimiter: 1,
    builds: 1,
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
});

test("Deployments Get Deployment", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("getDeployment"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.getDeployment({
    idOrUrl: "dpl_89qyp1cskzkLrVicDaZoDbjyHuDJ",
    withGitRepoInfo: "true",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    aliasAssigned: false,
    bootedAt: 2317.28,
    buildingAt: 458.05,
    buildSkipped: true,
    creator: {
      uid: "<id>",
    },
    public: true,
    status: "ERROR",
    id: "<id>",
    type: "LAMBDAS",
    createdAt: 3161.76,
    name: "<value>",
    readyState: "READY",
    meta: {
      "key": "<value>",
      "key1": "<value>",
    },
    regions: [],
    url: "https://disloyal-backburn.info",
    version: 1604.95,
  });
});

test("Deployments Create Deployment", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("createDeployment"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.createDeployment({
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
    requestBody: {
      files: [
        {
          file: "folder/file.js",
        },
        {
          file: "folder/file.js",
        },
      ],
      gitMetadata: {
        remoteUrl: "https://github.com/vercel/next.js",
        commitAuthorName: "kyliau",
        commitMessage:
          "add method to measure Interaction to Next Paint (INP) (#36490)",
        commitRef: "main",
        commitSha: "dc36199b2234c6586ebe05ec94078a895c707e29",
        dirty: true,
      },
      meta: {
        "foo": "bar",
      },
      name: "my-instant-deployment",
      project: "my-deployment-project",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    build: {
      env: [],
    },
    env: [
      "<value>",
      "<value>",
      "<value>",
    ],
    inspectorUrl: "https://grave-dredger.com",
    isInConcurrentBuildsQueue: false,
    isInSystemBuildsQueue: false,
    projectSettings: {},
    aliasAssigned: false,
    bootedAt: 4336.60,
    buildingAt: 7030.55,
    buildSkipped: true,
    creator: {
      uid: "<id>",
    },
    public: false,
    status: "QUEUED",
    type: "LAMBDAS",
    createdAt: 5133.44,
    name: "<value>",
    id: "<id>",
    version: 1218.01,
    meta: {
      "key": "<value>",
      "key1": "<value>",
    },
    readyState: "INITIALIZING",
    regions: [],
    url: "https://apprehensive-perp.info/",
    projectId: "<id>",
    ownerId: "<id>",
    routes: [
      {
        src: "<value>",
      },
      {
        src: "<value>",
      },
    ],
    plan: "pro",
    createdIn: "<value>",
  });
});

test("Deployments Cancel Deployment", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("cancelDeployment"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.cancelDeployment({
    id: "dpl_5WJWYSyB7BpgTj3EuwF37WMRBXBtPQ2iTMJHJBJyRfd",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    build: {
      env: [
        "<value>",
        "<value>",
        "<value>",
      ],
    },
    env: [
      "<value>",
      "<value>",
    ],
    inspectorUrl: "https://concrete-gerbil.org",
    isInConcurrentBuildsQueue: false,
    isInSystemBuildsQueue: true,
    projectSettings: {},
    aliasAssigned: false,
    bootedAt: 8528.74,
    buildingAt: 7590.78,
    buildSkipped: false,
    creator: {
      uid: "<id>",
    },
    public: true,
    status: "BUILDING",
    id: "<id>",
    createdAt: 3071.53,
    name: "<value>",
    meta: {
      "key": "<value>",
      "key1": "<value>",
      "key2": "<value>",
    },
    readyState: "QUEUED",
    regions: [
      "<value>",
    ],
    type: "LAMBDAS",
    url: "https://timely-reboot.name",
    version: 6067.47,
    createdIn: "<value>",
    ownerId: "<id>",
    plan: "pro",
    projectId: "<id>",
    routes: [
      {
        handle: "resource",
      },
      {
        src: "<value>",
        continue: false,
        middleware: 6618.12,
      },
    ],
  });
});

test("Deployments Upload File", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("uploadFile"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.uploadFile({
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Deployments List Deployment Files", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("listDeploymentFiles"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.listDeploymentFiles({
    id: "<id>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual([]);
});

test("Deployments Get Deployment File Contents", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("getDeploymentFileContents"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  await vercel.deployments.getDeploymentFileContents({
    id: "<id>",
    fileId: "<id>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
});

test("Deployments Get Deployments", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("getDeployments"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.getDeployments({
    app: "docs",
    from: 1612948664566,
    limit: 10,
    projectId: "QmXGTs7mvAMMC7WW5ebrM33qKG32QK3h4vmQMjmY",
    target: "production",
    to: 1612948664566,
    users: "kr1PsOIzqEL5Xg6M4VZcZosf,K4amb7K9dAt5R2vBJWF32bmY",
    since: 1540095775941,
    until: 1540095775951,
    state: "BUILDING,READY",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    pagination: {
      count: 20,
      next: 1540095775951,
      prev: 1540095775951,
    },
    deployments: [
      {
        uid: "dpl_2euZBFqxYdDMDG1jTrHFnNZ2eUVa",
        name: "docs",
        url: "docs-9jaeg38me.vercel.app",
        created: 1609492210000,
        deleted: 1609492210000,
        undeleted: 1609492210000,
        softDeletedByRetention: true,
        source: "cli",
        state: "READY",
        readyState: "READY",
        type: "LAMBDAS",
        creator: {
          uid: "eLrCnEgbKhsHyfbiNR7E8496",
          email: "example@example.com",
          username: "johndoe",
          githubLogin: "johndoe",
          gitlabLogin: "johndoe",
        },
        target: "production",
        createdAt: 1609492210000,
        buildingAt: 1609492210000,
        ready: 1609492210000,
        inspectorUrl:
          "https://vercel.com/acme/nextjs/J1hXN00qjUeoYfpEEf7dnDtpSiVq",
      },
      {
        uid: "dpl_2euZBFqxYdDMDG1jTrHFnNZ2eUVa",
        name: "docs",
        url: "docs-9jaeg38me.vercel.app",
        created: 1609492210000,
        deleted: 1609492210000,
        undeleted: 1609492210000,
        softDeletedByRetention: true,
        source: "cli",
        state: "READY",
        readyState: "READY",
        type: "LAMBDAS",
        creator: {
          uid: "eLrCnEgbKhsHyfbiNR7E8496",
          email: "example@example.com",
          username: "johndoe",
          githubLogin: "johndoe",
          gitlabLogin: "johndoe",
        },
        target: "production",
        createdAt: 1609492210000,
        buildingAt: 1609492210000,
        ready: 1609492210000,
        inspectorUrl:
          "https://vercel.com/acme/nextjs/J1hXN00qjUeoYfpEEf7dnDtpSiVq",
      },
    ],
  });
});

test("Deployments Delete Deployment", async () => {
  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: createTestHTTPClient("deleteDeployment"),
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.deployments.deleteDeployment({
    id: "dpl_5WJWYSyB7BpgTj3EuwF37WMRBXBtPQ2iTMJHJBJyRfd",
    url: "https://files-orcin-xi.vercel.app/",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    uid: "dpl_5WJWYSyB7BpgTj3EuwF37WMRBXBtPQ2iTMJHJBJyRfd",
    state: "DELETED",
  });
});
