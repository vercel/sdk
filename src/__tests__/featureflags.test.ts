/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Vercel } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Feature Flags List Flags", async () => {
  const testHttpClient = createTestHTTPClient("listFlags");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.listFlags({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    data: [],
  });
});

test("Feature Flags Create Flag", async () => {
  const testHttpClient = createTestHTTPClient("createFlag");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.createFlag({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    variants: [
      {
        value: false,
        id: "<id>",
      },
    ],
    id: "<id>",
    environments: {
      "key": {
        pausedOutcome: {
          type: "variant",
          variantId: "<id>",
        },
        fallthrough: {
          type: "variant",
          variantId: "<id>",
        },
        active: true,
        rules: [],
      },
    },
    kind: "number",
    revision: 6165.62,
    seed: 156.13,
    state: "archived",
    slug: "<value>",
    createdAt: 8146.33,
    updatedAt: 8302.64,
    createdBy: "<value>",
    ownerId: "<id>",
    projectId: "<id>",
    typeName: "flag",
  });
});

test("Feature Flags Get Flag", async () => {
  const testHttpClient = createTestHTTPClient("getFlag");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.getFlag({
    projectIdOrName: "<value>",
    flagIdOrSlug: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    variants: [],
    id: "<id>",
    environments: {},
    kind: "string",
    revision: 4506.54,
    seed: 2692.5,
    state: "active",
    slug: "<value>",
    createdAt: 9169.87,
    updatedAt: 2775.69,
    createdBy: "<value>",
    ownerId: "<id>",
    projectId: "<id>",
    typeName: "flag",
  });
});

test("Feature Flags Update Flag", async () => {
  const testHttpClient = createTestHTTPClient("updateFlag");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.updateFlag({
    projectIdOrName: "<value>",
    flagIdOrSlug: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    variants: [],
    id: "<id>",
    environments: {
      "key": {
        pausedOutcome: {
          type: "variant",
          variantId: "<id>",
        },
        fallthrough: {
          type: "split",
          base: {
            type: "entity",
            kind: "<value>",
            attribute: "<value>",
          },
          weights: {
            "key": 5332.25,
            "key1": 4559.62,
          },
          defaultVariantId: "<id>",
        },
        active: true,
        rules: [
          {
            id: "<id>",
            outcome: {
              type: "variant",
              variantId: "<id>",
            },
            conditions: [
              {
                lhs: {
                  type: "entity",
                  kind: "<value>",
                  attribute: "<value>",
                },
                cmp: "!endsWith",
              },
            ],
          },
        ],
      },
    },
    kind: "boolean",
    revision: 6275.71,
    seed: 9679.18,
    state: "archived",
    slug: "<value>",
    createdAt: 1600.13,
    updatedAt: 4288.92,
    createdBy: "<value>",
    ownerId: "<id>",
    projectId: "<id>",
    typeName: "flag",
  });
});

test("Feature Flags List Flag Versions", async () => {
  const testHttpClient = createTestHTTPClient("listFlagVersions");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.listFlagVersions({
    projectIdOrName: "<value>",
    flagIdOrSlug: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    versions: [],
    pagination: {},
  });
});

test("Feature Flags Get Flag Settings", async () => {
  const testHttpClient = createTestHTTPClient("getFlagSettings");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.getFlagSettings({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    typeName: "settings",
    projectId: "<id>",
    enabled: false,
    environments: [
      "<value 1>",
    ],
    entities: [],
    metadata: {
      activeFlagCount: 5032.56,
      archivedFlagCount: 7510.8,
      segmentCount: 4704.93,
      packSizeInBytes: 2505.31,
    },
  });
});

test("Feature Flags Update Flag Settings", async () => {
  const testHttpClient = createTestHTTPClient("updateFlagSettings");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.updateFlagSettings({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    typeName: "settings",
    projectId: "<id>",
    enabled: false,
    environments: [
      "<value 1>",
      "<value 2>",
      "<value 3>",
    ],
    entities: [
      {
        kind: "<value>",
        label: "<value>",
        attributes: [
          {
            key: "<key>",
            type: "<value>",
          },
        ],
      },
    ],
    metadata: {
      activeFlagCount: 9382.74,
      archivedFlagCount: 1968.58,
      segmentCount: 1175.12,
      packSizeInBytes: 5502.16,
    },
  });
});

test("Feature Flags List Team Flag Settings", async () => {
  const testHttpClient = createTestHTTPClient("listTeamFlagSettings");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.listTeamFlagSettings({
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Feature Flags List Team Flags", async () => {
  const testHttpClient = createTestHTTPClient("listTeamFlags");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.listTeamFlags({
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    data: [],
    pagination: {
      next: null,
    },
  });
});

test("Feature Flags Create Flag Segment", async () => {
  const testHttpClient = createTestHTTPClient("createFlagSegment");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.createFlagSegment({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    id: "<id>",
    label: "<value>",
    slug: "<value>",
    createdAt: 3411.5,
    updatedAt: 7820.53,
    projectId: "<id>",
    typeName: "segment",
    data: {},
    hint: "<value>",
  });
});

test("Feature Flags List Flag Segments", async () => {
  const testHttpClient = createTestHTTPClient("listFlagSegments");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.listFlagSegments({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    data: [],
  });
});

test("Feature Flags Get Flag Segment", async () => {
  const testHttpClient = createTestHTTPClient("getFlagSegment");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.getFlagSegment({
    projectIdOrName: "<value>",
    segmentIdOrSlug: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    id: "<id>",
    label: "<value>",
    slug: "<value>",
    createdAt: 9261.28,
    updatedAt: 346.59,
    projectId: "<id>",
    typeName: "segment",
    data: {},
    hint: "<value>",
  });
});

test("Feature Flags Update Flag Segment", async () => {
  const testHttpClient = createTestHTTPClient("updateFlagSegment");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.updateFlagSegment({
    projectIdOrName: "<value>",
    segmentIdOrSlug: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    id: "<id>",
    label: "<value>",
    slug: "<value>",
    createdAt: 2949.22,
    updatedAt: 6371.72,
    projectId: "<id>",
    typeName: "segment",
    data: {},
    hint: "<value>",
  });
});

test("Feature Flags Get Deployment Feature Flags", async () => {
  const testHttpClient = createTestHTTPClient("getDeploymentFeatureFlags");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.getDeploymentFeatureFlags({
    deploymentId: "<id>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    flags: [],
    status: {
      deploymentId: "<id>",
      projectId: "<id>",
      responseStatus: 5008.57,
      flagCount: 3132.84,
      createdAt: 2379.62,
    },
  });
});

test("Feature Flags Get Sdk Keys", async () => {
  const testHttpClient = createTestHTTPClient("getSdkKeys");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.getSDKKeys({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    data: [],
  });
});

test("Feature Flags Create Sdk Key", async () => {
  const testHttpClient = createTestHTTPClient("createSdkKey");

  const vercel = new Vercel({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    bearerToken: "<YOUR_BEARER_TOKEN_HERE>",
  });

  const result = await vercel.featureFlags.createSDKKey({
    projectIdOrName: "<value>",
    teamId: "team_1a2b3c4d5e6f7g8h9i0j1k2l",
    slug: "my-team-url-slug",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    hashKey: "<value>",
    projectId: "<id>",
    type: "mobile",
    environment: "<value>",
    createdBy: "<value>",
    createdAt: 4791.7,
    updatedAt: 3218.83,
  });
});
