/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { ClosedEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import {
  SandboxNetworkPolicy,
  SandboxNetworkPolicy$inboundSchema,
  SandboxNetworkPolicy$Outbound,
  SandboxNetworkPolicy$outboundSchema,
} from "./sandboxnetworkpolicy.js";
import { SDKValidationError } from "./sdkvalidationerror.js";

/**
 * The status of the sandbox.
 */
export const SandboxStatus = {
  Failed: "failed",
  Aborted: "aborted",
  Pending: "pending",
  Stopping: "stopping",
  Snapshotting: "snapshotting",
  Running: "running",
  Stopped: "stopped",
} as const;
/**
 * The status of the sandbox.
 */
export type SandboxStatus = ClosedEnum<typeof SandboxStatus>;

/**
 * This object contains information related to a Vercel Sandbox.
 */
export type Sandbox = {
  /**
   * The unique identifier of the sandbox.
   */
  id: string;
  /**
   * Memory allocated to this sandbox in MB.
   */
  memory: number;
  /**
   * Number of vCPUs allocated to this sandbox.
   */
  vcpus: number;
  /**
   * The region where the sandbox is hosted.
   */
  region: string;
  /**
   * The runtime of the sandbox.
   */
  runtime: string;
  /**
   * The maximum amount of time the sandbox will run for in milliseconds.
   */
  timeout: number;
  /**
   * The status of the sandbox.
   */
  status: SandboxStatus;
  /**
   * The time when the sandbox was requested, in milliseconds since the epoch.
   */
  requestedAt: number;
  /**
   * The time when the sandbox was started, in milliseconds since the epoch.
   */
  startedAt?: number | undefined;
  /**
   * The working directory of the sandbox.
   */
  cwd: string;
  /**
   * The time when the sandbox was requested to stop, in milliseconds since the epoch.
   */
  requestedStopAt?: number | undefined;
  /**
   * The time when the sandbox was stopped, in milliseconds since the epoch.
   */
  stoppedAt?: number | undefined;
  /**
   * The time when the sandbox was aborted, in milliseconds since the epoch.
   */
  abortedAt?: number | undefined;
  /**
   * The duration of the sandbox in milliseconds.
   */
  duration?: number | undefined;
  /**
   * The unique identifier of the snapshot associated with this sandbox, if any.
   */
  sourceSnapshotId?: string | undefined;
  /**
   * The time when a snapshot was requested, in milliseconds since the epoch.
   */
  snapshottedAt?: number | undefined;
  /**
   * The time when the sandbox was created, in milliseconds since the epoch.
   */
  createdAt: number;
  /**
   * The last time the sandbox was updated, in milliseconds since the epoch.
   */
  updatedAt: number;
  /**
   * The network policy applied to this sandbox, if any.
   */
  networkPolicy?: SandboxNetworkPolicy | undefined;
};

/** @internal */
export const SandboxStatus$inboundSchema: z.ZodNativeEnum<
  typeof SandboxStatus
> = z.nativeEnum(SandboxStatus);
/** @internal */
export const SandboxStatus$outboundSchema: z.ZodNativeEnum<
  typeof SandboxStatus
> = SandboxStatus$inboundSchema;

/** @internal */
export const Sandbox$inboundSchema: z.ZodType<Sandbox, z.ZodTypeDef, unknown> =
  z.object({
    id: types.string(),
    memory: types.number(),
    vcpus: types.number(),
    region: types.string(),
    runtime: types.string(),
    timeout: types.number(),
    status: SandboxStatus$inboundSchema,
    requestedAt: types.number(),
    startedAt: types.optional(types.number()),
    cwd: types.string(),
    requestedStopAt: types.optional(types.number()),
    stoppedAt: types.optional(types.number()),
    abortedAt: types.optional(types.number()),
    duration: types.optional(types.number()),
    sourceSnapshotId: types.optional(types.string()),
    snapshottedAt: types.optional(types.number()),
    createdAt: types.number(),
    updatedAt: types.number(),
    networkPolicy: types.optional(SandboxNetworkPolicy$inboundSchema),
  });
/** @internal */
export type Sandbox$Outbound = {
  id: string;
  memory: number;
  vcpus: number;
  region: string;
  runtime: string;
  timeout: number;
  status: string;
  requestedAt: number;
  startedAt?: number | undefined;
  cwd: string;
  requestedStopAt?: number | undefined;
  stoppedAt?: number | undefined;
  abortedAt?: number | undefined;
  duration?: number | undefined;
  sourceSnapshotId?: string | undefined;
  snapshottedAt?: number | undefined;
  createdAt: number;
  updatedAt: number;
  networkPolicy?: SandboxNetworkPolicy$Outbound | undefined;
};

/** @internal */
export const Sandbox$outboundSchema: z.ZodType<
  Sandbox$Outbound,
  z.ZodTypeDef,
  Sandbox
> = z.object({
  id: z.string(),
  memory: z.number(),
  vcpus: z.number(),
  region: z.string(),
  runtime: z.string(),
  timeout: z.number(),
  status: SandboxStatus$outboundSchema,
  requestedAt: z.number(),
  startedAt: z.number().optional(),
  cwd: z.string(),
  requestedStopAt: z.number().optional(),
  stoppedAt: z.number().optional(),
  abortedAt: z.number().optional(),
  duration: z.number().optional(),
  sourceSnapshotId: z.string().optional(),
  snapshottedAt: z.number().optional(),
  createdAt: z.number(),
  updatedAt: z.number(),
  networkPolicy: SandboxNetworkPolicy$outboundSchema.optional(),
});

export function sandboxToJSON(sandbox: Sandbox): string {
  return JSON.stringify(Sandbox$outboundSchema.parse(sandbox));
}
export function sandboxFromJSON(
  jsonString: string,
): SafeParseResult<Sandbox, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Sandbox$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Sandbox' from JSON`,
  );
}
