/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { smartUnion } from "../types/smartUnion.js";
import { SDKValidationError } from "./sdkvalidationerror.js";

export type UpdateRollingReleaseConfigRequest = {
  /**
   * Project ID or project name (URL-encoded)
   */
  idOrName: string;
  /**
   * The Team identifier to perform the request on behalf of.
   */
  teamId?: string | undefined;
  /**
   * The Team slug to perform the request on behalf of.
   */
  slug?: string | undefined;
};

/**
 * A stage object configured for a rolling release once a new deployment is triggered the first stage will be read in the proxy for first time visitors, and if a RNG < targetPercentage then it will serve the new deployment. Upon approval the next stage will be read, etc.
 */
export type UpdateRollingReleaseConfigResponseBodyStages = {
  /**
   * The percentage of traffic to serve to the canary deployment (0-100)
   */
  targetPercentage: number;
  /**
   * Whether or not this stage requires manual approval to proceed
   */
  requireApproval?: boolean | undefined;
  /**
   * Duration in minutes for automatic advancement to the next stage
   */
  duration?: number | undefined;
  /**
   * Whether to linearly shift traffic over the duration of this stage
   */
  linearShift?: boolean | undefined;
};

export type UpdateRollingReleaseConfigResponseBodyRollingRelease = {
  stages?:
    | Array<UpdateRollingReleaseConfigResponseBodyStages>
    | null
    | undefined;
};

export type UpdateRollingReleaseConfigResponseBody2 = {
  rollingRelease: UpdateRollingReleaseConfigResponseBodyRollingRelease | null;
};

export type UpdateRollingReleaseConfigResponseBody1 = {
  rollingRelease?: any | null | undefined;
};

export type UpdateRollingReleaseConfigResponseBody =
  | UpdateRollingReleaseConfigResponseBody1
  | UpdateRollingReleaseConfigResponseBody2;

/** @internal */
export const UpdateRollingReleaseConfigRequest$inboundSchema: z.ZodType<
  UpdateRollingReleaseConfigRequest,
  z.ZodTypeDef,
  unknown
> = z.object({
  idOrName: types.string(),
  teamId: types.optional(types.string()),
  slug: types.optional(types.string()),
});
/** @internal */
export type UpdateRollingReleaseConfigRequest$Outbound = {
  idOrName: string;
  teamId?: string | undefined;
  slug?: string | undefined;
};

/** @internal */
export const UpdateRollingReleaseConfigRequest$outboundSchema: z.ZodType<
  UpdateRollingReleaseConfigRequest$Outbound,
  z.ZodTypeDef,
  UpdateRollingReleaseConfigRequest
> = z.object({
  idOrName: z.string(),
  teamId: z.string().optional(),
  slug: z.string().optional(),
});

export function updateRollingReleaseConfigRequestToJSON(
  updateRollingReleaseConfigRequest: UpdateRollingReleaseConfigRequest,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigRequest$outboundSchema.parse(
      updateRollingReleaseConfigRequest,
    ),
  );
}
export function updateRollingReleaseConfigRequestFromJSON(
  jsonString: string,
): SafeParseResult<UpdateRollingReleaseConfigRequest, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => UpdateRollingReleaseConfigRequest$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'UpdateRollingReleaseConfigRequest' from JSON`,
  );
}

/** @internal */
export const UpdateRollingReleaseConfigResponseBodyStages$inboundSchema:
  z.ZodType<
    UpdateRollingReleaseConfigResponseBodyStages,
    z.ZodTypeDef,
    unknown
  > = z.object({
    targetPercentage: types.number(),
    requireApproval: types.optional(types.boolean()),
    duration: types.optional(types.number()),
    linearShift: types.optional(types.boolean()),
  });
/** @internal */
export type UpdateRollingReleaseConfigResponseBodyStages$Outbound = {
  targetPercentage: number;
  requireApproval?: boolean | undefined;
  duration?: number | undefined;
  linearShift?: boolean | undefined;
};

/** @internal */
export const UpdateRollingReleaseConfigResponseBodyStages$outboundSchema:
  z.ZodType<
    UpdateRollingReleaseConfigResponseBodyStages$Outbound,
    z.ZodTypeDef,
    UpdateRollingReleaseConfigResponseBodyStages
  > = z.object({
    targetPercentage: z.number(),
    requireApproval: z.boolean().optional(),
    duration: z.number().optional(),
    linearShift: z.boolean().optional(),
  });

export function updateRollingReleaseConfigResponseBodyStagesToJSON(
  updateRollingReleaseConfigResponseBodyStages:
    UpdateRollingReleaseConfigResponseBodyStages,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigResponseBodyStages$outboundSchema.parse(
      updateRollingReleaseConfigResponseBodyStages,
    ),
  );
}
export function updateRollingReleaseConfigResponseBodyStagesFromJSON(
  jsonString: string,
): SafeParseResult<
  UpdateRollingReleaseConfigResponseBodyStages,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      UpdateRollingReleaseConfigResponseBodyStages$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'UpdateRollingReleaseConfigResponseBodyStages' from JSON`,
  );
}

/** @internal */
export const UpdateRollingReleaseConfigResponseBodyRollingRelease$inboundSchema:
  z.ZodType<
    UpdateRollingReleaseConfigResponseBodyRollingRelease,
    z.ZodTypeDef,
    unknown
  > = z.object({
    stages: z.nullable(
      z.array(z.lazy(() =>
        UpdateRollingReleaseConfigResponseBodyStages$inboundSchema
      )),
    ).optional(),
  });
/** @internal */
export type UpdateRollingReleaseConfigResponseBodyRollingRelease$Outbound = {
  stages?:
    | Array<UpdateRollingReleaseConfigResponseBodyStages$Outbound>
    | null
    | undefined;
};

/** @internal */
export const UpdateRollingReleaseConfigResponseBodyRollingRelease$outboundSchema:
  z.ZodType<
    UpdateRollingReleaseConfigResponseBodyRollingRelease$Outbound,
    z.ZodTypeDef,
    UpdateRollingReleaseConfigResponseBodyRollingRelease
  > = z.object({
    stages: z.nullable(
      z.array(z.lazy(() =>
        UpdateRollingReleaseConfigResponseBodyStages$outboundSchema
      )),
    ).optional(),
  });

export function updateRollingReleaseConfigResponseBodyRollingReleaseToJSON(
  updateRollingReleaseConfigResponseBodyRollingRelease:
    UpdateRollingReleaseConfigResponseBodyRollingRelease,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigResponseBodyRollingRelease$outboundSchema.parse(
      updateRollingReleaseConfigResponseBodyRollingRelease,
    ),
  );
}
export function updateRollingReleaseConfigResponseBodyRollingReleaseFromJSON(
  jsonString: string,
): SafeParseResult<
  UpdateRollingReleaseConfigResponseBodyRollingRelease,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      UpdateRollingReleaseConfigResponseBodyRollingRelease$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'UpdateRollingReleaseConfigResponseBodyRollingRelease' from JSON`,
  );
}

/** @internal */
export const UpdateRollingReleaseConfigResponseBody2$inboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody2,
  z.ZodTypeDef,
  unknown
> = z.object({
  rollingRelease: types.nullable(
    z.lazy(() =>
      UpdateRollingReleaseConfigResponseBodyRollingRelease$inboundSchema
    ),
  ),
});
/** @internal */
export type UpdateRollingReleaseConfigResponseBody2$Outbound = {
  rollingRelease:
    | UpdateRollingReleaseConfigResponseBodyRollingRelease$Outbound
    | null;
};

/** @internal */
export const UpdateRollingReleaseConfigResponseBody2$outboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody2$Outbound,
  z.ZodTypeDef,
  UpdateRollingReleaseConfigResponseBody2
> = z.object({
  rollingRelease: z.nullable(
    z.lazy(() =>
      UpdateRollingReleaseConfigResponseBodyRollingRelease$outboundSchema
    ),
  ),
});

export function updateRollingReleaseConfigResponseBody2ToJSON(
  updateRollingReleaseConfigResponseBody2:
    UpdateRollingReleaseConfigResponseBody2,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigResponseBody2$outboundSchema.parse(
      updateRollingReleaseConfigResponseBody2,
    ),
  );
}
export function updateRollingReleaseConfigResponseBody2FromJSON(
  jsonString: string,
): SafeParseResult<
  UpdateRollingReleaseConfigResponseBody2,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      UpdateRollingReleaseConfigResponseBody2$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'UpdateRollingReleaseConfigResponseBody2' from JSON`,
  );
}

/** @internal */
export const UpdateRollingReleaseConfigResponseBody1$inboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody1,
  z.ZodTypeDef,
  unknown
> = z.object({
  rollingRelease: z.nullable(z.any()).optional(),
});
/** @internal */
export type UpdateRollingReleaseConfigResponseBody1$Outbound = {
  rollingRelease?: any | null | undefined;
};

/** @internal */
export const UpdateRollingReleaseConfigResponseBody1$outboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody1$Outbound,
  z.ZodTypeDef,
  UpdateRollingReleaseConfigResponseBody1
> = z.object({
  rollingRelease: z.nullable(z.any()).optional(),
});

export function updateRollingReleaseConfigResponseBody1ToJSON(
  updateRollingReleaseConfigResponseBody1:
    UpdateRollingReleaseConfigResponseBody1,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigResponseBody1$outboundSchema.parse(
      updateRollingReleaseConfigResponseBody1,
    ),
  );
}
export function updateRollingReleaseConfigResponseBody1FromJSON(
  jsonString: string,
): SafeParseResult<
  UpdateRollingReleaseConfigResponseBody1,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      UpdateRollingReleaseConfigResponseBody1$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'UpdateRollingReleaseConfigResponseBody1' from JSON`,
  );
}

/** @internal */
export const UpdateRollingReleaseConfigResponseBody$inboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody,
  z.ZodTypeDef,
  unknown
> = smartUnion([
  z.lazy(() => UpdateRollingReleaseConfigResponseBody1$inboundSchema),
  z.lazy(() => UpdateRollingReleaseConfigResponseBody2$inboundSchema),
]);
/** @internal */
export type UpdateRollingReleaseConfigResponseBody$Outbound =
  | UpdateRollingReleaseConfigResponseBody1$Outbound
  | UpdateRollingReleaseConfigResponseBody2$Outbound;

/** @internal */
export const UpdateRollingReleaseConfigResponseBody$outboundSchema: z.ZodType<
  UpdateRollingReleaseConfigResponseBody$Outbound,
  z.ZodTypeDef,
  UpdateRollingReleaseConfigResponseBody
> = smartUnion([
  z.lazy(() => UpdateRollingReleaseConfigResponseBody1$outboundSchema),
  z.lazy(() => UpdateRollingReleaseConfigResponseBody2$outboundSchema),
]);

export function updateRollingReleaseConfigResponseBodyToJSON(
  updateRollingReleaseConfigResponseBody:
    UpdateRollingReleaseConfigResponseBody,
): string {
  return JSON.stringify(
    UpdateRollingReleaseConfigResponseBody$outboundSchema.parse(
      updateRollingReleaseConfigResponseBody,
    ),
  );
}
export function updateRollingReleaseConfigResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<UpdateRollingReleaseConfigResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      UpdateRollingReleaseConfigResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'UpdateRollingReleaseConfigResponseBody' from JSON`,
  );
}
